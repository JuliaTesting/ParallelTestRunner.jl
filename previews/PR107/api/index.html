<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Reference · ParallelTestRunner.jl</title><meta name="title" content="API Reference · ParallelTestRunner.jl"/><meta property="og:title" content="API Reference · ParallelTestRunner.jl"/><meta property="twitter:title" content="API Reference · ParallelTestRunner.jl"/><meta name="description" content="Documentation for ParallelTestRunner.jl."/><meta property="og:description" content="Documentation for ParallelTestRunner.jl."/><meta property="twitter:description" content="Documentation for ParallelTestRunner.jl."/><meta property="og:url" content="https://juliatesting.github.io/ParallelTestRunner.jl/api/"/><meta property="twitter:url" content="https://juliatesting.github.io/ParallelTestRunner.jl/api/"/><link rel="canonical" href="https://juliatesting.github.io/ParallelTestRunner.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ParallelTestRunner.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../advanced/">Advanced Usage</a></li><li class="is-active"><a class="tocitem" href>API Reference</a><ul class="internal"><li><a class="tocitem" href="#Main-Functions"><span>Main Functions</span></a></li><li><a class="tocitem" href="#Test-Discovery"><span>Test Discovery</span></a></li><li><a class="tocitem" href="#Argument-Parsing"><span>Argument Parsing</span></a></li><li><a class="tocitem" href="#Worker-Management"><span>Worker Management</span></a></li><li><a class="tocitem" href="#Configuration"><span>Configuration</span></a></li><li><a class="tocitem" href="#Internal-Types"><span>Internal Types</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/main/docs/src/api.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h1><h2 id="Main-Functions"><a class="docs-heading-anchor" href="#Main-Functions">Main Functions</a><a id="Main-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Main-Functions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ParallelTestRunner.runtests"><a class="docstring-binding" href="#ParallelTestRunner.runtests"><code>ParallelTestRunner.runtests</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">runtests(mod::Module, args::Union{ParsedArgs,Array{String}};
         testsuite::Dict{String,Expr}=find_tests(pwd()),
         init_code = :(),
         init_worker_code = :(),
         test_worker = Returns(nothing),
         stdout = Base.stdout,
         stderr = Base.stderr,
         max_worker_rss = get_max_worker_rss())
runtests(mod::Module, ARGS; ...)</code></pre><p>Run Julia tests in parallel across multiple worker processes.</p><p><strong>Arguments</strong></p><ul><li><code>mod</code>: The module calling runtests</li><li><code>ARGS</code>: Command line arguments. This can be either the vector of strings of the arguments, typically from <a href="https://docs.julialang.org/en/v1/base/constants/#Base.ARGS"><code>Base.ARGS</code></a>, or a <a href="#ParallelTestRunner.ParsedArgs"><code>ParsedArgs</code></a> object, typically constructed with <a href="#ParallelTestRunner.parse_args"><code>parse_args</code></a>. When you run the tests with <a href="https://pkgdocs.julialang.org/v1/api/#Pkg.test"><code>Pkg.test</code></a>, the command line arguments passed to the script can be changed with the <code>test_args</code> keyword argument. If the caller needs to accept arguments too, consider using <a href="#ParallelTestRunner.parse_args"><code>parse_args</code></a> to parse the arguments first.</li></ul><p>Several keyword arguments are also supported:</p><ul><li><code>testsuite</code>: Dictionary mapping test names to expressions to execute (default: <a href="#ParallelTestRunner.find_tests"><code>find_tests(pwd())</code></a>). By default, automatically discovers all <code>.jl</code> files in the test directory and its subdirectories.</li><li><code>init_code</code>: Code use to initialize each test&#39;s sandbox module (e.g., import auxiliary packages, define constants, etc).</li><li><code>init_worker_code</code>: Code use to initialize each worker. This is run only once per worker instead of once per test.</li><li><code>test_worker</code>: Optional function that takes a test name and <code>init_worker_code</code> if <code>init_worker_code</code> is defined and returns a specific worker. When returning <code>nothing</code>, the test will be assigned to any available default worker.</li><li><code>stdout</code> and <code>stderr</code>: I/O streams to write to (default: <code>Base.stdout</code> and <code>Base.stderr</code>)</li><li><code>max_worker_rss</code>: RSS threshold where a worker will be restarted once it is reached.</li></ul><p><strong>Command Line Options</strong></p><ul><li><code>--help</code>: Show usage information and exit</li><li><code>--list</code>: List all available test files and exit</li><li><code>--verbose</code>: Print more detailed information during test execution</li><li><code>--quickfail</code>: Stop the entire test run as soon as any test fails</li><li><code>--jobs=N</code>: Use N worker processes (default: based on CPU threads and available memory)</li><li><code>TESTS...</code>: Filter test files by name, matched using <code>startswith</code></li></ul><p><strong>Behavior</strong></p><ul><li>Automatically discovers all <code>.jl</code> files in the test directory (excluding <code>runtests.jl</code>)</li><li>Sorts test files by runtime (longest-running are started first) for load balancing</li><li>Launches worker processes with appropriate Julia flags for testing</li><li>Monitors memory usage and recycles workers that exceed memory limits</li><li>Provides real-time progress output with timing and memory statistics</li><li>Handles interruptions gracefully (Ctrl+C)</li><li>Returns <code>nothing</code>, but throws <code>Test.FallbackTestSetException</code> if any tests fail</li></ul><p><strong>Examples</strong></p><p>Run all tests with default settings (auto-discovers <code>.jl</code> files)</p><pre><code class="language-julia hljs">using ParallelTestRunner
using MyPackage

runtests(MyPackage, ARGS)</code></pre><p>Run only tests matching &quot;integration&quot; (matched with <code>startswith</code>):</p><pre><code class="language-julia hljs">using ParallelTestRunner
using MyPackage

runtests(MyPackage, [&quot;integration&quot;])</code></pre><p>Define a custom test suite</p><pre><code class="language-julia hljs">using ParallelTestRunner
using MyPackage

testsuite = Dict(
    &quot;custom&quot; =&gt; quote
        @test 1 + 1 == 2
    end
)

runtests(MyPackage, ARGS; testsuite)</code></pre><p>Customize the test suite</p><pre><code class="language-julia hljs">using ParallelTestRunner
using MyPackage

testsuite = find_tests(pwd())
args = parse_args(ARGS)
if filter_tests!(testsuite, args)
    # Remove a specific test
    delete!(testsuite, &quot;slow_test&quot;)
end
runtests(MyPackage, args; testsuite)</code></pre><p><strong>Memory Management</strong></p><p>Workers are automatically recycled when they exceed memory limits to prevent out-of-memory issues during long test runs. The memory limit is set based on system architecture.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L659-L762">source</a></section></details></article><h2 id="Test-Discovery"><a class="docs-heading-anchor" href="#Test-Discovery">Test Discovery</a><a id="Test-Discovery-1"></a><a class="docs-heading-anchor-permalink" href="#Test-Discovery" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ParallelTestRunner.find_tests"><a class="docstring-binding" href="#ParallelTestRunner.find_tests"><code>ParallelTestRunner.find_tests</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">find_tests(dir::String) -&gt; Dict{String, Expr}</code></pre><p>Discover test files in a directory and return a test suite dictionary.</p><p>Walks through <code>dir</code> and finds all <code>.jl</code> files (excluding <code>runtests.jl</code>), returning a dictionary mapping test names to expression that include each test file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L486-L493">source</a></section></details></article><h2 id="Argument-Parsing"><a class="docs-heading-anchor" href="#Argument-Parsing">Argument Parsing</a><a id="Argument-Parsing-1"></a><a class="docs-heading-anchor-permalink" href="#Argument-Parsing" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ParallelTestRunner.parse_args"><a class="docstring-binding" href="#ParallelTestRunner.parse_args"><code>ParallelTestRunner.parse_args</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">parse_args(args; [custom::Array{String}]) -&gt; ParsedArgs</code></pre><p>Parse command-line arguments for <code>runtests</code>. Typically invoked by passing <code>Base.ARGS</code>.</p><p>Fields of this structure represent command-line options, containing <code>nothing</code> when the option was not specified, or <code>Some(optional_value=nothing)</code> when it was.</p><p>Custom arguments can be specified via the <code>custom</code> keyword argument, which should be an array of strings representing custom flag names (without the <code>--</code> prefix). Presence of these flags will be recorded in the <code>custom</code> field of the returned <a href="#ParallelTestRunner.ParsedArgs"><code>ParsedArgs</code></a> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L579-L590">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ParallelTestRunner.filter_tests!"><a class="docstring-binding" href="#ParallelTestRunner.filter_tests!"><code>ParallelTestRunner.filter_tests!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">filter_tests!(testsuite, args::ParsedArgs) -&gt; Bool</code></pre><p>Filter tests in <code>testsuite</code> based on command-line arguments in <code>args</code>.</p><p>Returns <code>true</code> if additional filtering may be done by the caller, <code>false</code> otherwise.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L636-L642">source</a></section></details></article><h2 id="Worker-Management"><a class="docs-heading-anchor" href="#Worker-Management">Worker Management</a><a id="Worker-Management-1"></a><a class="docs-heading-anchor-permalink" href="#Worker-Management" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ParallelTestRunner.addworker"><a class="docstring-binding" href="#ParallelTestRunner.addworker"><code>ParallelTestRunner.addworker</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">addworker(; env=Vector{Pair{String, String}}(), init_worker_code = :(), exename=nothing, exeflags=nothing; color::Bool=false)</code></pre><p>Add a single worker process. To add multiple workers, use <a href="#ParallelTestRunner.addworkers"><code>addworkers</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>env</code>: Vector of environment variable pairs to set for the worker process.</li><li><code>init_worker_code</code>: Code use to initialize each worker. This is run only once per worker instead of once per test.</li><li><code>exename</code>: Custom executable to use for the worker process.</li><li><code>exeflags</code>: Custom flags to pass to the worker process.</li><li><code>color</code>: Boolean flag to decide whether to start <code>julia</code> with <code>--color=yes</code> (if <code>true</code>) or <code>--color=no</code> (if <code>false</code>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L446-L458">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ParallelTestRunner.addworkers"><a class="docstring-binding" href="#ParallelTestRunner.addworkers"><code>ParallelTestRunner.addworkers</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">addworkers(; env=Vector{Pair{String, String}}(), init_worker_code = :(), exename=nothing, exeflags=nothing, color::Bool=false)</code></pre><p>Add <code>X</code> worker processes. To add a single worker, use <a href="#ParallelTestRunner.addworker"><code>addworker</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>env</code>: Vector of environment variable pairs to set for the worker process.</li><li><code>init_worker_code</code>: Code use to initialize each worker. This is run only once per worker instead of once per test.</li><li><code>exename</code>: Custom executable to use for the worker process.</li><li><code>exeflags</code>: Custom flags to pass to the worker process.</li><li><code>color</code>: Boolean flag to decide whether to start <code>julia</code> with <code>--color=yes</code> (if <code>true</code>) or <code>--color=no</code> (if <code>false</code>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L431-L443">source</a></section></details></article><h2 id="Configuration"><a class="docs-heading-anchor" href="#Configuration">Configuration</a><a id="Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ParallelTestRunner.default_njobs"><a class="docstring-binding" href="#ParallelTestRunner.default_njobs"><code>ParallelTestRunner.default_njobs</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">default_njobs()</code></pre><p>Determine default number of parallel jobs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L385-L389">source</a></section></details></article><h2 id="Internal-Types"><a class="docs-heading-anchor" href="#Internal-Types">Internal Types</a><a id="Internal-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-Types" title="Permalink"></a></h2><p>These are internal types, not subject to semantic versioning contract (could be changed or removed at any point without notice), not intended for consumption by end-users. They are documented here exclusively for <code>ParallelTestRunner</code> developers and contributors.</p><article><details class="docstring" open="true"><summary id="ParallelTestRunner.ParsedArgs"><a class="docstring-binding" href="#ParallelTestRunner.ParsedArgs"><code>ParallelTestRunner.ParsedArgs</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ParsedArgs</code></pre><p>Struct representing parsed command line arguments, to be passed to <a href="#ParallelTestRunner.runtests"><code>runtests</code></a>. <code>ParsedArgs</code> objects are typically obtained by using <a href="#ParallelTestRunner.parse_args"><code>parse_args</code></a>.</p><p>Fields are</p><ul><li><code>jobs::Union{Some{Int}, Nothing}</code>: the number of jobs</li><li><code>verbose::Union{Some{Nothing}, Nothing}</code>: whether verbose printing was enabled</li><li><code>quickfail::Union{Some{Nothing}, Nothing}</code>: whether quick fail was enabled</li><li><code>list::Union{Some{Nothing}, Nothing}</code>: whether tests should be listed</li><li><code>custom::Dict{String,Any}</code>: a dictionary of custom arguments</li><li><code>positionals::Vector{String}</code>: the list of positional arguments passed on the command line, i.e. the explicit list of test files (to be matches with <code>startswith</code>)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L529-L543">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ParallelTestRunner.WorkerTestSet"><a class="docstring-binding" href="#ParallelTestRunner.WorkerTestSet"><code>ParallelTestRunner.WorkerTestSet</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">WorkerTestSet</code></pre><p>A test set wrapper used internally by worker processes. <code>Base.DefaultTestSet</code> detects when it is the top-most and throws a <code>TestSetException</code> containing very little information. By inserting this wrapper as the top-most test set, we can capture the full results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/ParallelTestRunner.jl/blob/54b8114d3645d1199c8d03973544af46f6aacd91/src/ParallelTestRunner.jl#L250-L257">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../advanced/">« Advanced Usage</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.17.0 on <span class="colophon-date" title="Sunday 1 March 2026 20:41">Sunday 1 March 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
